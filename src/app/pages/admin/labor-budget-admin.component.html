<!-- Labor Budget Admin page layout -->
<div class="space-y-8">
  <!-- Header and navigation -->
  <div class="flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between">
    <div>
      <h1 class="text-3xl font-bold text-gray-900 dark:text-white">Labor Budget Admin</h1>
      <p class="mt-2 text-gray-600 dark:text-gray-400">Maintain work items and formulas used in the Labor Budget calculator.</p>
    </div>
    <a
      routerLink="/labor-budget"
      class="inline-flex items-center gap-2 rounded-lg border border-gray-300 dark:border-gray-700 px-4 py-2 text-sm font-semibold text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800"
    >
      View Calculator
    </a>
  </div>

  @if (errorMessage) {
    <div class="rounded-lg border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700 dark:border-red-900 dark:bg-red-900/40 dark:text-red-200">
      {{ errorMessage }}
    </div>
  }

  <!-- Add new labor catalog item -->
  <div class="rounded-lg bg-white dark:bg-gray-800 p-6 shadow">
    <h2 class="text-lg font-semibold text-gray-900 dark:text-white mb-4">Add Work Item</h2>
    <div class="grid grid-cols-1 gap-4 md:grid-cols-2">
      <div>
        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Work Item Name</label>
        <input
          [(ngModel)]="newItemName"
          type="text"
          class="w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 px-4 py-2 text-gray-900 dark:text-white"
          placeholder="Switch Deployment"
        />
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Hours per Switch</label>
        <input
          [(ngModel)]="newItemHours"
          type="number"
          min="0"
          step="0.1"
          class="w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 px-4 py-2 text-gray-900 dark:text-white"
        />
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Rate per Hour</label>
        <input
          [(ngModel)]="newItemRate"
          type="number"
          min="0"
          step="0.01"
          class="w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 px-4 py-2 text-gray-900 dark:text-white"
        />
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Unit Price</label>
        <input
          [(ngModel)]="newItemUnitPrice"
          type="number"
          min="0"
          step="0.01"
          class="w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 px-4 py-2 text-gray-900 dark:text-white"
          placeholder="Defaults to hours x rate"
        />
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Unit of Measure</label>
        <select
          [(ngModel)]="newItemUnitOfMeasure"
          class="w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 px-4 py-2 text-gray-900 dark:text-white"
        >
          @for (unit of laborUnits; track unit) {
            <option [value]="unit">{{ unit }}</option>
          }
        </select>
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Section</label>
        <select
          [(ngModel)]="newItemSection"
          class="w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 px-4 py-2 text-gray-900 dark:text-white"
        >
          @for (section of sections; track section) {
            <option [value]="section">{{ section }}</option>
          }
        </select>
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Reference Architecture</label>
        <select
          [(ngModel)]="newItemReferenceArchitecture"
          class="w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 px-4 py-2 text-gray-900 dark:text-white"
        >
          @for (tag of referenceArchitectureTags; track tag) {
            <option [value]="tag">{{ tag }}</option>
          }
        </select>
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Description</label>
        <input
          [(ngModel)]="newItemDescription"
          type="text"
          class="w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 px-4 py-2 text-gray-900 dark:text-white"
          placeholder="Formula reference or notes"
        />
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Tooltip</label>
        <input
          [(ngModel)]="newItemTooltip"
          type="text"
          class="w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 px-4 py-2 text-gray-900 dark:text-white"
          placeholder="Shown on hover in calculator"
        />
      </div>
    </div>
    <div class="mt-4">
      <button
        type="button"
        (click)="addItem()"
        class="rounded-lg bg-blue-600 px-6 py-2 text-sm font-semibold text-white hover:bg-blue-700"
      >
        Add Item
      </button>
    </div>
  </div>

  <!-- Manage sections used by catalog items -->
  <div class="rounded-lg bg-white dark:bg-gray-800 p-6 shadow">
    <h2 class="text-lg font-semibold text-gray-900 dark:text-white mb-4">Manage Sections</h2>
    <div class="grid grid-cols-1 gap-4 md:grid-cols-2">
      <div>
        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">New Section</label>
        <div class="flex gap-2">
          <input
            [(ngModel)]="newSectionName"
            type="text"
            class="flex-1 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 px-4 py-2 text-gray-900 dark:text-white"
            placeholder="Switching"
          />
          <button
            type="button"
            (click)="addSection()"
            class="rounded-lg bg-blue-600 px-4 py-2 text-sm font-semibold text-white hover:bg-blue-700"
          >
            Add
          </button>
        </div>
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Existing Sections</label>
        <div class="flex flex-wrap gap-2">
          @for (section of sections; track section) {
            <div class="flex items-center gap-2 rounded-full border border-gray-200 dark:border-gray-700 px-3 py-1 text-sm text-gray-700 dark:text-gray-300">
              <span>{{ section }}</span>
              @if (section !== 'General') {
                <button
                  type="button"
                  (click)="deleteSection(section)"
                  class="text-xs font-semibold text-red-600 dark:text-red-400"
                >
                  Remove
                </button>
              }
            </div>
          }
        </div>
      </div>
    </div>
  </div>

  <!-- Manage reusable solution blueprints -->
  <div class="rounded-lg bg-white dark:bg-gray-800 p-6 shadow">
    <div class="flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between mb-4">
      <div>
        <h2 class="text-lg font-semibold text-gray-900 dark:text-white">Solution Blueprints</h2>
        <p class="text-sm text-gray-600 dark:text-gray-400">Create reusable solution bundles for the wizard.</p>
      </div>
      <button
        type="button"
        (click)="resetBlueprintForm()"
        class="text-sm font-medium text-blue-600 dark:text-blue-400"
      >
        Reset Form
      </button>
    </div>

    @if (blueprintErrorMessage) {
      <div class="rounded-lg border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700 dark:border-red-900 dark:bg-red-900/40 dark:text-red-200 mb-4">
        {{ blueprintErrorMessage }}
      </div>
    }

    <div class="grid grid-cols-1 gap-4 md:grid-cols-2">
      <div>
        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Blueprint Name</label>
        <input
          [(ngModel)]="blueprintName"
          type="text"
          class="w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 px-4 py-2 text-gray-900 dark:text-white"
          placeholder="Core Switching Deployment"
        />
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Description</label>
        <input
          [(ngModel)]="blueprintDescription"
          type="text"
          class="w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 px-4 py-2 text-gray-900 dark:text-white"
          placeholder="Baseline campus rollout"
        />
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Reference Architecture</label>
        <select
          [(ngModel)]="blueprintReferenceArchitecture"
          class="w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 px-4 py-2 text-gray-900 dark:text-white"
        >
          <option value="">— None —</option>
          @for (tag of referenceArchitectureTags; track tag) {
            <option [value]="tag">{{ tag }}</option>
          }
        </select>
      </div>
      <div class="grid grid-cols-2 gap-4">
        <div>
          <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Overhead %</label>
          <input
            [(ngModel)]="blueprintOverheadPercent"
            type="number"
            min="0"
            step="0.1"
            class="w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 px-4 py-2 text-gray-900 dark:text-white"
          />
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Contingency %</label>
          <input
            [(ngModel)]="blueprintContingencyPercent"
            type="number"
            min="0"
            step="0.1"
            class="w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 px-4 py-2 text-gray-900 dark:text-white"
          />
        </div>
      </div>
    </div>

    <div class="mt-5">
      <div class="flex items-center justify-between mb-3">
        <h3 class="text-sm font-semibold text-gray-700 dark:text-gray-300">Blueprint Work Items</h3>
        <button
          type="button"
          (click)="addBlueprintItemRow()"
          class="rounded-lg bg-blue-600 px-3 py-2 text-xs font-semibold text-white hover:bg-blue-700"
        >
          Add Item
        </button>
      </div>

      @if (blueprintItems.length === 0) {
        <p class="text-sm text-gray-500 dark:text-gray-400">No work items yet.</p>
      } @else {
        <div class="overflow-x-auto">
          <table class="min-w-full border-separate border-spacing-y-2">
            <thead>
              <tr class="text-left text-xs font-semibold uppercase tracking-wide text-gray-500 dark:text-gray-400">
                <th class="px-3">Work Item</th>
                <th class="px-3">Quantity</th>
                <th class="px-3">Hours/Unit</th>
                <th class="px-3">Rate/Hour</th>
                <th class="px-3"></th>
              </tr>
            </thead>
            <tbody>
              @for (item of blueprintItems; track item.id) {
                <tr class="rounded-lg bg-gray-50 dark:bg-gray-900/40">
                  <td class="px-3 py-3">
                    <select
                      [ngModel]="item.catalogItemId"
                      (ngModelChange)="updateBlueprintItemCatalog(item, $event)"
                      class="w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 px-3 py-2 text-sm text-gray-900 dark:text-white"
                    >
                      @for (catalog of items; track catalog.id) {
                        <option [value]="catalog.id">{{ catalog.name }}</option>
                      }
                    </select>
                  </td>
                  <td class="px-3 py-3">
                    <input
                      type="number"
                      min="0"
                      [ngModel]="item.quantity"
                      (ngModelChange)="updateBlueprintItemValue(item, 'quantity', $event)"
                      class="w-24 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 px-3 py-2 text-sm text-gray-900 dark:text-white"
                    />
                  </td>
                  <td class="px-3 py-3">
                    <input
                      type="number"
                      min="0"
                      [ngModel]="item.hoursPerUnit"
                      (ngModelChange)="updateBlueprintItemValue(item, 'hoursPerUnit', $event)"
                      class="w-24 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 px-3 py-2 text-sm text-gray-900 dark:text-white"
                    />
                  </td>
                  <td class="px-3 py-3">
                    <input
                      type="number"
                      min="0"
                      [ngModel]="item.ratePerHour"
                      (ngModelChange)="updateBlueprintItemValue(item, 'ratePerHour', $event)"
                      class="w-28 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 px-3 py-2 text-sm text-gray-900 dark:text-white"
                    />
                  </td>
                  <td class="px-3 py-3 text-right">
                    <button
                      type="button"
                      (click)="removeBlueprintItemRow(item)"
                      class="text-xs font-semibold text-red-600 hover:text-red-700"
                    >
                      Remove
                    </button>
                  </td>
                </tr>
              }
            </tbody>
          </table>
        </div>
      }
    </div>

    <div class="mt-6 grid grid-cols-1 gap-4 md:grid-cols-2">
      <div>
        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Project Management %</label>
        <input
          [(ngModel)]="blueprintProjectManagementPercent"
          type="number"
          min="0"
          class="w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 px-4 py-2 text-gray-900 dark:text-white"
        />
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Project Management Hours</label>
        <input
          [(ngModel)]="blueprintProjectManagementHours"
          type="number"
          min="0"
          class="w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 px-4 py-2 text-gray-900 dark:text-white"
        />
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Project Management Rate</label>
        <input
          [(ngModel)]="blueprintProjectManagementRate"
          type="number"
          min="0"
          class="w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 px-4 py-2 text-gray-900 dark:text-white"
        />
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Project Management Notes</label>
        <input
          [(ngModel)]="blueprintProjectManagementNotes"
          type="text"
          class="w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 px-4 py-2 text-gray-900 dark:text-white"
        />
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Adoption Hours</label>
        <input
          [(ngModel)]="blueprintAdoptionHours"
          type="number"
          min="0"
          class="w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 px-4 py-2 text-gray-900 dark:text-white"
        />
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Adoption Rate</label>
        <input
          [(ngModel)]="blueprintAdoptionRate"
          type="number"
          min="0"
          class="w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 px-4 py-2 text-gray-900 dark:text-white"
        />
      </div>
      <div class="md:col-span-2">
        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Adoption Notes</label>
        <input
          [(ngModel)]="blueprintAdoptionNotes"
          type="text"
          class="w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 px-4 py-2 text-gray-900 dark:text-white"
        />
      </div>
    </div>

    <div class="mt-5 flex flex-wrap items-center gap-2">
      <button
        type="button"
        (click)="saveBlueprint()"
        class="rounded-lg bg-blue-600 px-6 py-2 text-sm font-semibold text-white hover:bg-blue-700"
      >
        @if (blueprintFormId) { Update Blueprint } @else { Create Blueprint }
      </button>
      @if (blueprintFormId) {
        <button
          type="button"
          (click)="resetBlueprintForm()"
          class="rounded-lg border border-gray-300 dark:border-gray-600 px-6 py-2 text-sm font-semibold text-gray-700 dark:text-gray-200"
        >
          Cancel Edit
        </button>
      }
    </div>

    <div class="mt-8">
      <h3 class="text-sm font-semibold uppercase tracking-wide text-gray-500 dark:text-gray-400">Saved Blueprints</h3>
      @if (blueprints.length === 0) {
        <p class="mt-2 text-sm text-gray-500 dark:text-gray-400">No solution blueprints created yet.</p>
      } @else {
        <div class="mt-3 space-y-3">
          @for (blueprint of blueprints; track blueprint.id) {
            <div class="rounded-lg border border-gray-200 dark:border-gray-700 p-4">
              <div class="flex flex-col gap-3 md:flex-row md:items-center md:justify-between">
                <div>
                  <p class="text-sm font-semibold text-gray-900 dark:text-white">{{ blueprint.name }}</p>
                  @if (blueprint.referenceArchitecture) {
                    <span class="inline-block rounded bg-indigo-100 dark:bg-indigo-900/40 px-2 py-0.5 text-xs font-medium text-indigo-700 dark:text-indigo-300 mb-1">{{ blueprint.referenceArchitecture }}</span>
                  }
                  <p class="text-xs text-gray-500 dark:text-gray-400">
                    {{ blueprint.items.length }} item(s) • Overhead {{ blueprint.overheadPercent }}% • Contingency {{ blueprint.contingencyPercent }}%
                  </p>
                  <p class="text-xs text-gray-500 dark:text-gray-400">
                    PM {{ blueprint.projectManagementPercent }}% • Adoption {{ blueprint.adoptionHours }}h @ {{ blueprint.adoptionRatePerHour }}
                  </p>
                </div>
                <div class="flex items-center gap-2">
                  <button
                    type="button"
                    (click)="editBlueprint(blueprint)"
                    class="text-sm font-medium text-blue-600 dark:text-blue-400"
                  >
                    Edit
                  </button>
                  <button
                    type="button"
                    (click)="deleteBlueprint(blueprint)"
                    class="text-sm font-medium text-red-600 dark:text-red-400"
                  >
                    Delete
                  </button>
                </div>
              </div>
            </div>
          }
        </div>
      }
    </div>
  </div>

  <div class="rounded-lg bg-white dark:bg-gray-800 p-6 shadow">
    <div class="flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between mb-4">
      <h2 class="text-lg font-semibold text-gray-900 dark:text-white">Labor Budget Items</h2>
      <div class="w-full sm:w-64">
        <label class="block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1">Reference Architecture</label>
        <select
          [(ngModel)]="referenceArchitectureFilter"
          class="w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 px-3 py-2 text-sm text-gray-900 dark:text-white"
        >
          <option value="All">All</option>
          @for (tag of referenceArchitectureTags; track tag) {
            <option [value]="tag">{{ tag }}</option>
          }
        </select>
      </div>
    </div>
    @if (filteredItems.length === 0) {
      <p class="text-sm text-gray-500 dark:text-gray-400">No work items configured.</p>
    } @else {
      <div class="space-y-4">
        @for (item of filteredItems; track item.id) {
          <div class="rounded-lg border border-gray-200 dark:border-gray-700 p-4">
            <div class="flex flex-col gap-3 md:flex-row md:items-center md:justify-between">
              <div>
                <p class="text-sm font-semibold text-gray-900 dark:text-white">{{ item.name }}</p>
                <p class="text-xs text-gray-500 dark:text-gray-400">{{ item.section }} • {{ item.unitOfMeasure }} • {{ item.referenceArchitecture }} • {{ item.description || 'No description' }}</p>
              </div>
              <div class="flex items-center gap-2">
                @if (!editingItems[item.id]) {
                  <button
                    type="button"
                    (click)="startEditItem(item)"
                    class="text-sm font-medium text-blue-600 dark:text-blue-400"
                  >
                    Edit
                  </button>
                }
                <button
                  type="button"
                  (click)="deleteItem(item)"
                  class="text-sm font-medium text-red-600 dark:text-red-400"
                >
                  Delete
                </button>
              </div>
            </div>

            @if (editingItems[item.id]) {
              <div class="mt-4 grid grid-cols-1 gap-4 md:grid-cols-2">
                <div>
                  <label class="block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1">Work Item Name</label>
                  <input
                    [(ngModel)]="itemDrafts[item.id].name"
                    type="text"
                    class="w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 px-3 py-2 text-gray-900 dark:text-white"
                  />
                </div>
                <div>
                  <label class="block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1">Hours per Switch</label>
                  <input
                    [(ngModel)]="itemDrafts[item.id].hoursPerSwitch"
                    type="number"
                    min="0"
                    step="0.1"
                    class="w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 px-3 py-2 text-gray-900 dark:text-white"
                  />
                </div>
                <div>
                  <label class="block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1">Rate per Hour</label>
                  <input
                    [(ngModel)]="itemDrafts[item.id].ratePerHour"
                    type="number"
                    min="0"
                    step="0.01"
                    class="w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 px-3 py-2 text-gray-900 dark:text-white"
                  />
                </div>
                <div>
                  <label class="block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1">Unit Price</label>
                  <input
                    [(ngModel)]="itemDrafts[item.id].unitPrice"
                    type="number"
                    min="0"
                    step="0.01"
                    class="w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 px-3 py-2 text-gray-900 dark:text-white"
                  />
                </div>
                <div>
                  <label class="block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1">Unit of Measure</label>
                  <select
                    [(ngModel)]="itemDrafts[item.id].unitOfMeasure"
                    class="w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 px-3 py-2 text-gray-900 dark:text-white"
                  >
                    @for (unit of laborUnits; track unit) {
                      <option [value]="unit">{{ unit }}</option>
                    }
                  </select>
                </div>
                <div>
                  <label class="block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1">Section</label>
                  <select
                    [(ngModel)]="itemDrafts[item.id].section"
                    class="w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 px-3 py-2 text-gray-900 dark:text-white"
                  >
                    @for (section of sections; track section) {
                      <option [value]="section">{{ section }}</option>
                    }
                  </select>
                </div>
                <div>
                  <label class="block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1">Reference Architecture</label>
                  <select
                    [(ngModel)]="itemDrafts[item.id].referenceArchitecture"
                    class="w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 px-3 py-2 text-gray-900 dark:text-white"
                  >
                    @for (tag of referenceArchitectureTags; track tag) {
                      <option [value]="tag">{{ tag }}</option>
                    }
                  </select>
                </div>
                <div>
                  <label class="block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1">Description</label>
                  <input
                    [(ngModel)]="itemDrafts[item.id].description"
                    type="text"
                    class="w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 px-3 py-2 text-gray-900 dark:text-white"
                  />
                </div>
                <div>
                  <label class="block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1">Tooltip</label>
                  <input
                    [(ngModel)]="itemDrafts[item.id].tooltip"
                    type="text"
                    class="w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 px-3 py-2 text-gray-900 dark:text-white"
                  />
                </div>
              </div>
              <div class="mt-4 flex items-center gap-2">
                <button
                  type="button"
                  (click)="saveEditItem(item)"
                  class="rounded-lg bg-blue-600 px-4 py-2 text-xs font-semibold text-white hover:bg-blue-700"
                >
                  Save
                </button>
                <button
                  type="button"
                  (click)="cancelEditItem(item)"
                  class="rounded-lg bg-gray-300 px-4 py-2 text-xs font-semibold text-gray-900 hover:bg-gray-400 dark:bg-gray-700 dark:text-white dark:hover:bg-gray-600"
                >
                  Cancel
                </button>
              </div>
            } @else {
              <div class="mt-3 text-sm text-gray-600 dark:text-gray-400">
                <span>Hours per switch: {{ item.hoursPerSwitch }}</span>
                <span class="mx-2">|</span>
                <span>Rate: ${{ item.ratePerHour }}/hr</span>
                <span class="mx-2">|</span>
                <span>Unit Price: ${{ item.unitPrice }}</span>
              </div>
            }
          </div>
        }
      </div>
    }
  </div>
</div>
